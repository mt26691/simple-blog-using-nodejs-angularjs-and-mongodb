<div class="row" ng-if="!isPasswordChange">
    <div class="col-md-6 col-md-offset-3">
        <div class="login-panel panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Change password.</h3>
            </div>
            <div class="panel-body">
                <form name="form" method="post" role="form" novalidate ng-submit="submitForm(form.$valid)">
                    <fieldset>
                        <div class="form-group" ng-class="{ 'has-error' : form.password.$invalid && !form.password.$pristine && form.$submitted }">
                            <label>Current password:</label>
                            <input type="password" class="form-control" placeholder="Current password" name="password" required ng-model="changePasswordForm.currentPassword"
                            ng-minlength="6" ng-maxlength="40" />
                            <div ng-messages="form.password.$error" ng-if="form.$submitted" class="error-message">
                                <span ng-message="minlength">Password must be at least 6 characters.</span>
                                <span ng-message="maxlength">Password must be less than 40 characters.</span>
                                <span ng-message="required">Password is required.</span>
                            </div>
                        </div>

                        <div class="form-group" ng-class="{ 'has-error' : form.newPassword.$invalid && !form.newPassword.$pristine && form.$submitted }">
                            <label>New Password:</label>
                            <input type="password" class="form-control" placeholder="New Password" name="newPassword" required ng-model="changePasswordForm.password"
                            ng-minlength="6" ng-maxlength="40" maxlength="40" />
                            <div ng-messages="form.newPassword.$error" ng-if="form.$submitted" class="error-message">
                                <span ng-message="minlength">Password must be at least 6 characters.</span>
                                <span ng-message="maxlength">Password must be less than 40 characters.</span>
                                <span ng-message="required">Password is required.</span>
                            </div>
                        </div>

                        <div class="form-group" ng-class="{ 'has-error' : form.repeatNewPassword.$invalid && !form.repeatNewPassword.$pristine && form.$submitted }">
                            <label>Confirm password:</label>
                            <input type="password" class="form-control" placeholder="Confirm password" name="repeatNewPassword" required ng-model="changePasswordForm.repeatNewPassword"
                            ng-minlength="6" ng-maxlength="40" maxlength="40" nx-equal="changePasswordForm.password" />
                            <div ng-messages="form.repeatNewPassword.$error" ng-if="form.$submitted" class="error-message">
                                <span ng-message="minlength">Password must be at least 6 characters.</span>
                                <span ng-message="maxlength">Password must be less than 40 characters.</span>
                                <span ng-message="required">Password is required.</span>
                                <span ng-message="nxEqual">New password does not match the confirm password.</span>
                            </div>
                        </div>
                        <div class="form-group error-message" ng-if="msg.length>0">
                            {{msg}}
                        </div>
                        <div class="form-group">
                            <input type="submit" class="btn btn-block btn-primary" value="Change password" />
                        </div>
                    </fieldset>
                </form>
            </div>
        </div>
    </div>
</div>
<h1 ng-if="isPasswordChange">
	Password is changed.
</h1>